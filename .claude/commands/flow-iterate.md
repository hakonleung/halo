# ARC 迭代工作流

在已完成的 PRD 基础上进行功能迭代，复用已有设计文档。

## 参数

$ARGUMENTS

格式: `[PRD_XXX] [迭代需求]`

示例: `PRD_001 给行为记录列表增加搜索和筛选功能`

## 执行流程

请严格按照 `ai-coding/action-iterate.md` 定义的流程执行：

### 1. 初始化

1. 解析参数，获取原 PRD 单号和迭代需求
2. 生成迭代单号 `ITR_XXX`
3. 创建 Git 分支 `feat/ITR_XXX`
4. 创建工作目录 `ai-works/ITR_XXX/`
5. 加载原 PRD 上下文

### 2. 执行 4 阶段

| 阶段 | 目标 | 产出 |
|------|------|------|
| I1 增量需求分析 | 识别变更类型和影响范围 | `analysis.md` |
| I2 增量设计 | 生成补丁文档 | `prd-patch.md`, `ui-patch.md`, `tech-patch.md` |
| I3 增量实现 | 按补丁文档修改代码 | `changes.md` |
| I4 回归验证 | 增量测试 + 回归测试 | `report.md` |

### 3. I1 增量需求分析

1. 加载原 PRD 上下文（读取 `ai-works/PRD_XXX/` 目录）
2. 对比分析：识别变更类型（新增/修改/删除）
3. 影响范围分析

### 4. I2 增量设计

生成补丁文档而非重写完整文档。

### 5. I3 增量实现

按补丁文档修改代码，遵循原代码风格。

### 6. I4 回归验证

1. 增量测试：为新增/修改的 AC 编写测试
2. 回归测试：运行原 PRD 的测试用例

## 用户响应格式

- `确认` / `通过` - 进入下一步
- `修改 [内容]` - 修改指定内容
- `返工: [原因]` - 当前阶段返工

请开始执行工作流。
